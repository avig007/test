<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Upload Images to Google Drive</title>
</head>
<body>
  <h1>Upload up to 10 images</h1>
  <form id="uploadForm">
    <input type="file" id="images" name="images" accept="image/*" multiple required />
    <br /><br />
    <button type="submit">Upload to Drive</button>
  </form>

  <script>
    const GAS_URL = 'https://script.google.com/macros/s/AKfycbxV7gRFrbe_IhEpY_X2Rnxc4rR6v3EantNWLANBxqEoNv7Oolaf3FLwY_aOPhzhaN3RXA/exec'; // <-- replace this!

    const form = document.getElementById('uploadForm');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const files = document.getElementById('images').files;

      if (files.length === 0) {
        alert('Please select at least one image.');
        return;
      }
      if (files.length > 10) {
        alert('Please select no more than 10 images.');
        return;
      }

      // Read files as base64 and prepare payload
      const filesData = [];
      for (const file of files) {
        const base64 = await new Promise((resolve, reject) => {
          const reader = new FileReader();
          reader.onload = () => resolve(reader.result.split(',')[1]);
          reader.onerror = reject;
          reader.readAsDataURL(file);
        });

        filesData.push({
          name: file.name,
          mimeType: file.type,
          data: base64,
        });
      }

      const payload = { files: filesData };

      try {
        const response = await fetch(GAS_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          mode: 'cors', 
          body: JSON.stringify(payload),
        });

        const text = await response.text();
        alert(text === "Success" ? "Upload successful!" : `Upload failed: ${text}`);
        if (text === "Success") form.reset();
      } catch (err) {
        alert('Error: ' + err.message);
      }
    });
  </script>
</body>
</html>



